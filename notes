xfreerdp /u:student /v:IP_Address /dynamic-resolution +glyph-cache +clipboard



Windows powershell ssh:

-needs WinRm to be running
  start-service WinRM
  
-needs WsMan 
get-item WSMAN:\localhost\client\trustedhosts
set-item -value -concatenate to add hosts

cat .\words.txt | Select-String -pattern '\w*a\w*|\w*z\w*' | measure 



OS Public Repository
https://os.cybbh.io/public/os/latest/index.html
OS CTFd Server
http://10.50.22.25:8000/
RDP from in-class network
xfreerdp /u:<username> /v:<IP_Address> /dynamic-resolution +glyph-cache +clipboard
RDP from Windows Ops Station/Windows PC
mstsc.exe /v:<IP_Address> /admin /fullscreen
                         -OR-
Utilize 'Remote Desktop Connection' GUI
SSH from in-class network
ssh -X <username>@<IP_Address>
SCP from local to remote
scp <file_location> <username_of_remote>@<IP_Address_of_Remote>:<full_path_to_destination>
SCP from remote to local
scp <username_of_remote>@<IP_Address_of_Remote>:<full_path_to_location> <file_destination>
(edited)







REGISTRIES:

High keys are the root keys of the system, all other keys are under them


HKEY_CLASSES_ROOT

HKEY_CURRENT_USER
-symbolic link to HKEY users

HKEY_LOCAL_MACHINE
-machine data not users
BCD0000000000
Hardware
SAM
Secuity
  CurrentControlSet001
    can be used for persistance, is loaded as well as currentcontrolset

Software
System

HKEY_USERS
-allusers
  s-1-5-18
  s-1-5-19
  s-1-5-20
  -localsystem accounts
  s-1-5-21
  -domain accounts
  
HKEY_CURRENT_CONFIG
-current config loaded

 
new-item
set-itemproperty
get-item / childitem
get-psdrive

To mount HKU to filesystem:

 New-PSDrive -Name HKU -PSProvider Registry -Root HKEY_Users
 
 add-content -value "New-PSDrive -Name HKU -PSProvider Registry -Root HKEY_Users" $profile.allusersallhosts
 
 &$profile.allusersallhosts
 
 
 
 
 get-item -path registry::HKEY_users\*\software\microsoft\Windows\CurrentVersion\run
 -checks all registries without having to mount HKU
 
 priv esc:
 
 HKey_local_machine\microsoft\windows 
 
 
 
 
 
 FILE SYSTEM
 ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 
 
 alternate data streams
 
dir /R
-displays alternate streams

"Elden Ring does not deserve GOTY" > calc.fuk:truth.txt
-creates alternate stream

notepad calc.fuk:truth.txt
-opens the text in notepad

In powershell:

get-item .\calc.fuk -stream truth.txt


get-childitem $pwd | foreach-object { get-item $.fullname -stream * ; where { $_.stream -ne ':$DATA'}} | get-content
-gets content of alternate data streams













LINUX
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

crtl t - open terminal

Create ssh profile:

vim .ssh/config

Host linops
    HostName 10.50.32.237
    User student
    Port 22

ssh keygen

ssh-copy-id linops

ssh linops


Alias:

cat .bashrc

vim .bash_aliases

  alias sshops='ssh linops -x terminator&'
  
source .bashrc

sshops


Host Enumeration:

Where Am I?
hostname
uname -a

Who am I?
whoami
id

What am I allowed to do?
sudo -l

What's going on?
w
who
ps -elf

What's that? 

Why is that happening?

How is that happening?

What's in there?

what interfaces and ip addresses are on the box?
ifconfig
ip addr/ip a
netstat
ss -ntlp
-n tells number instead of name of protocol
-may need sudo to display processes associated
ip route/ip r
arp
ip neigh/ip n
iptables -L
-may need sudo




FILES:

/bin(usr/bin,/usr/local/bin)
-binaries

/sbin(/usr/sbin)
-system binaries

/home
-default users home directory

/usr
-universal system reasources, catchall for system-wide files 

/etc
-everything configurable for the system

/var
-logs, things that will change with time

/boot
-GRUB, what system reads to boot

/dev
-special device files, hardware

/lib
-library, fucntions necesarry for certain applications 

/mnt
-dedicated for permenaly attached storage

/media
-removable media

/opt 
-for any applications the user intalls

/run
-runtime and varible data

/tmp
-temporary files 

/proc
-processes


USERS and GROUPS:

/etc/passwd
-all users

/etc/group 
-shows groups on system
gruopname:password:gid:supplmentary users

file permissions
user    group     other
750     student   student

suid
-runs a command as specified user

guid
-runs a command as specified group

sticky bit
-only deleted by person who created file 


man -k <word>
-searches for a keyword 

cat /etc/shells
-shows shells availible

grep -woFf Inquisition_Targets guardsmen.txt
-compares two files





WINDOWS BOOT PROCESS
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Rootkit
-injects code through drivers

Bootkit
-rootkit that mainly focuses on boot process


POST

BIOS                                          UEFI
-uses MBR                                     -uses GPT
-MBR is first 512 bytes on drive              -secure boot sequence checks core files to repair OS


CSRSS 
-requests items from other entities

LSASS
-user authentication

services.exe 
-service control manager



session 0
-non interactive
-system runs under


0-1000 PID
system level

< 1000
user and smss, csrss, winlogon




Type C:\Windows\Panter\Setup.log | findstr /i "Detected boot enviroment"

bcdedit | findstr /i winload
-if .exe BIOS
bcdedit | findstr /i winresume
-cold start or warm

bcdedit /deletevalue safeboot
bcdedit /deletevalue safebootalternateshell
-returns system to normal

secure attention sequence 
-crtl alt delete



LINUX FILE SYSTEM
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
SYSV

BIOS 
MBR
GRUB
Kernel
INIT
Runlevels


dmidecode -t bios
-shows os and boot information

lsblk
-shows disks and where they are mounted

df -h
-more information for disks

sudo xxd -l 512 -g 1 /dev/sda
-shows disk grouped in 512 bytes one byte at a time

hex eb means jump in assembly

hex 90 is noop

majic number is almost always 55aa

sudo parted -l 
-shows disk info
msdos = BIOS
gpt = uefi

sudo dd if=/dev/sda of=MBRcopy bs=1 count=512

xxd 
-opens a file


GRUB - Grand Unified Bootloader

boot/grub/grub.cfg
-Grub config file

linux	/boot/vmlinuz-4.15.0-76-generic root=LABEL=cloudimg-rootfs ro  console=tty1 console=ttyS0
-line that loads the kernel

KERNEL

linux kernel is monolithic 

linux kernel uses modules which help kernel interact with hardware

lsmod
-lists kernel modules
process num 0

makes daemon kthreadd with proc id 2

INIT

ls -l /sbin/init
-if there is a symlink to systemd then on system d

ps -p 1 
-shows system type

init is the service and process manager

sysv init very simple cant do much, uses runlevels
sysd init can do more and uses targets


ls /etc/rc3.d

/etc/init.d
-s and k scripts

/etc/inittab
-init config table( only on sysV)

Minas_Tirith is sysV


RUNLEVELS

0 - halt 
1 - single user mode
2 - multiuser, no network
3 - full multiuser, network
4 - not  used
5 - GUI
6 - reboot

ls -l /etc/rc<1-6>.d 
-shows different service in different runlevels 

SYSTEMD
-service, process, boot, home directory, login, etc. manager

Targets 
ls -lisa /lib/systemd/system/defaul.target
-check defaul target

/etc/systemd/system
-user created services

/lib/systemd/systtem, /usr/lib/systemd/system
-services created by package maintaners

cat /lib/systemd/system/defaul.target
-gives more information on dafault target

systemctl list-depencencies grahpical.target
-shows all dependencies .target = needs


systemctl show -p Wandts <target>
-shows wants of the target

systemctl list-units-files

systemctl cat graphical.target

/etc/profile 
-system wide user conf 
-persistance 

/etc/enviroment
-global varibles
-any update requires restart 

/etc/bash.bashrc
-interactve non-login shell

/etc/profile.d 
-runs scipts for any user



LINUX USEFUL COMMANDS
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
suid
-runs a command as specified user

guid
-runs a command as specified group

sticky bit
-only deleted by person who created file 


man -k <word>
-searches for a keyword 

cat /etc/shells
-shows shells availible

grep -woFf Inquisition_Targets guardsmen.txt
-compares two files











